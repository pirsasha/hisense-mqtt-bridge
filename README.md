# üì∫ Hisense MQTT Bridge (Toshiba / Hisense VIDAA)

MQTT-–±—Ä–∏–¥–∂ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞–º–∏ **Hisense –∏ Toshiba** (–Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ VIDAA) –∏–∑ Home Assistant.

–ü–æ–∑–≤–æ–ª—è–µ—Ç:
- üì° –ß—Ç–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å TV (–∏—Å—Ç–æ—á–Ω–∏–∫, –∑–∞–ø—É—â–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≥—Ä–æ–º–∫–æ—Å—Ç—å, capabilities)
- üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `KEY_HOME`, `KEY_VOLUP`)
- üß† –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `UUID` —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞
- üîó –ü—Ä–æ–±—Ä–æ—Å —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Hisense MQTT –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –±—Ä–æ–∫–µ—Ä (Mosquitto)
- üß™ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Home Assistant –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π MQTT-–º–æ—Å—Ç:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ **Hisense MQTT-–±—Ä–æ–∫–µ—Ä—É** (–ø–æ—Ä—Ç `36669`) –ø–æ TLS —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ **–ª–æ–∫–∞–ª—å–Ω–æ–º—É Mosquitto –≤ Home Assistant**
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç Hisense —Ä–µ—Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—Ç—Å—è –≤ `hisense/`-—Ç–æ–ø–∏–∫–∏

### üîÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–æ–º:
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥ –≤ —Ç–æ–ø–∏–∫ `hisense/command`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π MQTT-—Ç–æ–ø–∏–∫:
  ```
  /remoteapp/tv/remote_service/<uuid>$vidaa_common/actions/sendkey
  ```

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–∞–Ω–¥:  
  `KEY_HOME`, `KEY_VOLUP`, `KEY_POWER`, `KEY_LEFT`, `KEY_RIGHT`, `KEY_OK`, `KEY_BACK` –∏ –¥—Ä.

### üì° –ß—Ç–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- –ó–∞–ø—É—â–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:  
  ```json
  {"statetype":"app","name":"kinopoisk","url":"..."}
  ```

- –ò—Å—Ç–æ—á–Ω–∏–∫ HDMI, —Å—Ç–∞—Ç—É—Å —Å–∏–≥–Ω–∞–ª–∞, capabilities, sourcelist –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ –¥–æ–±–∞–≤—å –µ–≥–æ –≤ Home Assistant:
   ```
   https://github.com/USERNAME/hisense-mqtt-bridge
   ```

2. –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Home Assistant –ø–µ—Ä–µ–π–¥–∏ –≤:
   ```
   –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è ‚Üí –î–æ–±–∞–≤–∏—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
   ```

3. –£—Å—Ç–∞–Ω–æ–≤–∏ `Hisense MQTT Bridge`, –∑–∞–ø–æ–ª–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Mosquitto:

   ```json
   {
     "mqtt_host": "–ê–î–†–ï–°_–ú–û–°–ö–ò–¢–û_–ë–†–û–ö–ï–†–ê",
     "mqtt_port": 1883,
     "mqtt_username": "–ò–ú–Ø_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø",
     "mqtt_password": "–ü–ê–†–û–õ–¨"
   }
   ```

4. –ü–æ–º–µ—Å—Ç–∏ –≤ `/ssl/` —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Hisense MQTT):
   - `rcm_certchain_pem.cer`
   - `rcm_pem_privkey.pkcs8`

---

## üîç –°–µ–Ω—Å–æ—Ä—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –°–µ–Ω—Å–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```yaml
sensor:
  - platform: mqtt
    name: –ó–∞–ø—É—â–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¢–í
    state_topic: "hisense/remoteapp/mobile/broadcast/ui_service/state"
    value_template: >
      {% if value_json.statetype == "app" %}
        {{ value_json.name }}
      {% else %}
        None
      {% endif %}
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:
```yaml
automation:
  - alias: "–í—ã–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç –µ—Å–ª–∏ –Ω–µ –∏–≥—Ä–∞–µ—Ç YouTube"
    trigger:
      - platform: state
        entity_id: binary_sensor.motion_livingroom
        to: "on"
    condition:
      - condition: not
        conditions:
          - condition: state
            entity_id: sensor.zapushchennoe_prilozhenie_na_tv
            state: "youtube"
    action:
      - service: light.turn_off
        target:
          entity_id: light.tv_backlight
```

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π, —Ä–∞—Å—à–∏—Ä—è–π –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–π –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã.

---

## üôå –ê–≤—Ç–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞: [–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–∏—Ä–æ–≥–æ–≤](https://t.me/pirogovc)  
–ü—Ä–æ–µ–∫—Ç —Å–¥–µ–ª–∞–Ω —Å –ª—é–±–æ–≤—å—é –∫ —É–º–Ω—ã–º –¥–æ–º–∞–º, Home Assistant –∏ VIDAA.
